---
title: Exportation des données de l'observateur d'événements virtuel Description : Cette rubrique explique comment exporter les données de l'observateur d'événements virtuels pour un événement virtuel à l'aide de l'API Analytics.
parent: Virtual Event 
grandparent: Experiences
description: In this topic you will learn how to export virtual event viewer data.
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">Introduction</h2>
		<p>Vous pouvez voir les événements de rapport pour vos événements virtuels regroupés par appareil et emplacement, en plus du compte, de la visionneuse et des analyses vidéo pour un compte particulier. Ces informations peuvent vous aider à mieux organiser vos événements virtuels à venir afin de maximiser l'engagement des spectateurs.</p>
		<p>Ces données peuvent être téléchargées à l'aide de l'API Analytics et renvoyées au format JSON, CSV ou XLXS. La section suivante fournit une brève introduction à l'API Analytics. Si vous savez déjà comment l'utiliser, vous pouvez passer à la section suivante pour obtenir des informations sur l'obtention de données d'analyse pour les événements virtuels.</p>
  </section>
	<section class="bcls-section">
		<h2 id="Analytics_API">L'API Analytics</h2>
		<p>Comme les autres API de <a href="https://apis.support.brightcove.com/">plate-forme</a>, l'API Analytics est une API RESTful qui vous permet d'interagir avec la plateforme Video Cloud par programmation. Il renvoie des données d'analyse basées sur divers paramètres d'URL que vous incluez avec la demande. Par défaut, les données sont renvoyées au format JSON, mais vous pouvez demander à la place d'ouvrir les données CSV ou XLXS dans l'application de feuille de calcul.</p>
		<aside class="bcls-aside bcls-aside--information">Notez que ce document ne couvre que ce que vous devez savoir pour obtenir des données d'analyse pour les événements virtuels. Consultez la documentation générale de l'API <a href="https://apis.support.brightcove.com/analytics-api/index.html">Analytics</a> pour d'autres utilisations.</aside>
		<h3>Comment faire des demandes</h3>
		<p>Les requêtes adressées aux API RESTful sont adressées à une URL, de la même manière qu'un navigateur envoie une requête à une URL pour récupérer une page Web. Cependant, vous ne pouvez pas simplement coller la demande d'API dans un navigateur, car la demande doit être authentifiée (nous y arrivons) pour montrer que vous êtes autorisé à obtenir les données. Il existe cependant de nombreux outils pour vous aider à le faire. Voici une courte liste :</p>
		<ul>
			<li><a href="https://apis.support.brightcove.com/general/use-insomnia-api-requests.html">Insomnie</a> (une application multiplateforme populaire)</li>
			<li><a href="https://apis.support.brightcove.com/general/use-postman-api-requests.html">Facteur</a> (une autre application multiplateforme populaire)</li>
			<li><a href="https://apis.support.brightcove.com/general/concepts-api-tester.html">Testeur d'API en ligne</a> créé par Brightcove Learning Services</li>
			<li><a href="https://apis.support.brightcove.com/getting-started/concepts-testing-tools-brightcove-apis.html#shell">api-tester.sh</a> (un script shell basé sur curl créé par Brightcove Learning Services)</li>
		</ul>
		<h3>Authentification des demandes</h3>
		<p>Pour protéger vos données, les demandes d'API Analytics doivent inclure un en-tête Authorization contenant un jeton d'accès :</p>
		<pre><code class="language-http" translate="No">Authorization: bearer <span class="bcls-input">your access token</span></code></pre>
		<p>Comment obtenir le jeton d'accès ? Vous pouvez tout lire à ce sujet dans <a href="https://apis.support.brightcove.com/oauth/guides/getting-access-tokens.html">Obtention d'un jeton d'accès</a>, mais la réponse courte est qu'après avoir fait un peu de préparation, tous les outils énumérés ci-dessus (et bien d'autres) l'obtiendront pour vous.</p>
		<p>La préparation consiste à obtenir les informations d'identification du <strong>client</strong>, qui consistent en un <code translate="no">client_id</code> et un <code translate="no">client_secret</code>. Vous pouvez les obtenir à l'aide de la page Administrateur <a href="https://studio.brightcove.com/products/videocloud/admin/oauthsettings">Studio</a> (vous devez être administrateur sur votre compte ou demander à un administrateur de le faire) :</p>
		<ol class="bcls-tasklist-restart">
			<li>Cliquez sur <span class="button-blue">Register New Application</span>.</li>
			<li>Dans la boîte de dialogue qui s'ouvre, saisissez "Analytics" pour le nom.</li>
			<li>Sélectionnez le ou les comptes pour lesquels vous souhaitez utiliser l'API.</li>
			<li>
				Sous API Brightcove <strong>Exposed</strong>, sélectionnez <strong>Lire</strong> sous <strong>Analytics</strong> et <strong>Video Read</strong> sous <strong>CMS</strong>:
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/experiences/virtual-event/analytics-api-permissions.png" alt="API Permissions">
					<figcaption class="bcls-caption--image">Autorisations API</figcaption>
				</figure>
			</li>
			<li>Cliquez sur <span class="button-blue">Save</span>.</li>
			<li>
				Une nouvelle boîte de dialogue affichera le <strong>identité du client</strong> <strong>Secret du client</strong>. Copiez-les et enregistrez-les tous les deux dans un endroit sûr où vous pourrez les retrouver. <aside class="bcls-aside bcls-aside--warning">Une fois que vous fermez cette boîte de dialogue, il n'y a aucun moyen de récupérer à nouveau ce secret client. Si vous le perdez, vous devrez en créer un nouveau.</aside>
			</li>
		</ol>
		<h3>Le jeton d'accès</h3>
		<p>Le jeton d'accès est récupéré à partir d'une autre API Brightcove à l'aide des informations d'identification du client. Vous pouvez le faire vous-même, mais encore une fois, l'un des outils répertoriés dans la section précédente prendra vos informations d'identification client et obtiendra le jeton d'accès pour vous, et le placera dans l'en-tête de demande envoyé avec votre demande d'API Analytics.</p>
	</section>
  <section class="bcls-section">
    <h2 id="API_request">La demande d'API Analytics</h2>
    <p>Voici le formulaire de demande d'API Analytics :</p>
    <pre><code class="language-http" translate="No">http://analytics.api.brightcove.com/v1/data?accounts=<span class="bcls-input">{account1_id,account2_id}</span>
&from=<span class="bcls-highlight">{yyyy-mm-dd}</span>
&to=<span class="bcls-highlight">{yyyy-mm-dd}</span>
&dimensions=viewer,video,country,city,region,device_type,protocol
&fields=video,video.name,viewer,country,region,city,device_type,time,video_view,video_percent_viewed,video_seconds_viewed
&sort=-video_view&limit=20&format=csv</code></pre>
		<aside class="bcls-aside bcls-aside--information">Notez qu'il ne doit y avoir aucun saut de ligne dans l'URL de la requête ! des sauts de ligne sont ajoutés ici pour plus de lisibilité.</aside>
		<h3>Paramètres requis</h3>
		<table class="bcls-table">
			<caption class="bcls-caption--table">Paramètres requis</caption>
			<thead class="bcls-table__head">
					<tr>
							<th>Paramètre</th>
							<th>Valeurs requises</th>
							<th>Valeurs facultatives</th>
					</tr>
			</thead>
			<tbody class="bcls-table__body">
					<tr>
							<td><code translate="no">comptes</code></td>
							<td>un ou plusieurs identifiants de compte</td>
							<td></td>
					</tr>
					<tr>
							<td><code translate="no">dimensions</code></td>
							<td>
								<ul>
									<li><code translate="no">téléspectateur</code></li>
									<!-- <li><code translate="no">application</code></li> -->
								</ul>
							</td>
							<td>
								<ul>
									<li><code translate="no">compte</code></li>
									<li><code translate="no">vidéo</code></li>
									<li><code translate="no">pays</code></li>
									<li><code translate="no">région</code></li>
									<li><code translate="no">ville</code></li>
									<li><code translate="no">périphérique_type</code></li>
									<li><code translate="no">protocole</code></li>
								</ul>
							</td>
					</tr>
			</tbody>
	</table>
	<p>Voir <a href="https://apis.support.brightcove.com/analytics/getting-started/analytics-api-overview-dimensions-fields-and-parameters.html#params">Paramètres</a> pour certains paramètres facultatifs supplémentaires pouvant être utilisés pour définir la plage de dates, trier les résultats, définir le format de réponse, etc.</p>

  </section>
	<section class="bcls-section">
		<h2 id="where_filters">Où filtres</h2>
		<p>Vous pouvez filtrer les résultats en utilisant le <code translate="no">où</code> paramètre. Voir <a href="https://apis.support.brightcove.com/analytics/getting-started/analytics-api-overview-dimensions-fields-and-parameters.html#filterValues">Où les filtres</a> pour plus de détails</p>
	</section>
	<section class="bcls-section">
		<h2 id="fields">Champs</h2>
		<h3>Collecté directement auprès du joueur</h3>
		<ul>
			<li><code translate="no">spectateur</code>: Observateur d'événements (ID SSO ou ID de périphérique ou chaîne unique basée sur l'agent utilisateur et l'IP), extrait du <code translate="no">utilisateur</code> champ</li>
			<!-- <li><code translate="no">application</code>: virtual event experience id, if null default value = <code translate="no">account_id</code></li> -->
			<li><code translate="no">time</code> : horodatage du dernier événement reçu</li>
			<li><code translate="no">vidéo</code></li>
			<li><code translate="no">pays</code></li>
			<li><code translate="no">région</code></li>
			<li><code translate="no">ville</code></li>
			<li><code translate="no">périphérique_type</code></li>
		</ul>
		<h3>Métriques agrégées</h3>
		<ul>
			<li><code translate="no">video_view</code> : le nombre total de fois que <code translate="no">video_view</code> a été envoyé par le lecteur (notez que <code translate="no">video_view</code> <strong>n'est pas</strong> envoyé lorsque le spectateur met en pause et redémarre une vidéo, ou regarde la vidéo plusieurs fois sans actualiser la page)</li>
		</ul>
		<h3>Champs calculés</h3>
		<ul>
			<li>
				<code translate="no">video_seconds_viewés</code>:
				<ul>
					<li>Valeur de plage la plus élevée reçue par l'API Collector indépendamment de l'ordre</li>
					<li>Notez que les événements décrivant des plages supérieures à 20 secondes sont rejetés par le système Analytics, ce qui peut entraîner une valeur inexacte si le joueur n'a pas été correctement instrumenté pour envoyer des plages de 20 secondes ou moins. Voir <a href="https://apis.support.brightcove.com/data-collection/overview-data-collection-api-v2.html">Présentation : API de collecte de données</a></li>
				</ul>
			</li>
			<li><code translate="no">video_percent_viewé</code> : video_seconds_viewed/video_duration *100 (cette valeur sera manquante ou inexacte si la durée de la vidéo n'a pas été envoyée au collecteur de données)</li>
			<li><code translate="no">video_engagement_xx</code> : le nombre total de vues au xx video_percent_viewé (xx = 1, 25, 50, 75 ou 100)</li>
		</ul>
		<details>
			<summary>Exemple de réponse d'API (JSON)</summary>
<pre><code class="language-json" translate="no">{ 4 "item_count": 1, 5 "items": [ 6 { 7 "viewer": "test@brightcove.com", 8 "country": "GB", 9 "video_seconds_viewed": 253, 10 "city": "London", 11 "video_percent_viewed": 527.08, 12 "device_type": "other", 13 "video": "70701475639202", 14 "video_view": 46, 15 "region": "GB-ENG" 16 } 17], 18 « résumé » : { 19 "video_seconds_viewed": 253, 20 "video_percent_viewed": 527.08, 21 "video_view": 46 22 } 23}</code></pre>
		</details>
	</section>
</article>