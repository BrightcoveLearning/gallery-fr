---
title: Utilisation du contrôle d'accès basé sur les rôles
parent: Virtual Event 
grandparent: Experiences
description: In this topic you will learn how to use role-based access control to restrict the videos that appear in an experience based upon the user's role.
layout: staging
---
 <h1>Utilisation du contrôle d'accès basé sur les rôles</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <p>Si les utilisateurs doivent se connecter à votre expérience d'événement virtuel, le contrôle d'accès basé sur les rôles peut être utilisé pour filtrer les vidéos affichées aux utilisateurs en fonction de leur rôle. Le contrôle d'accès basé sur les rôles repose sur un attribut SAML spécifié sur l'objet utilisateur renvoyé par le système de gestion des utilisateurs (système d'enregistrement, SSO). Les règles sont définies en fonction des rôles utilisateur et des balises Video Cloud. Brightcove recommande que toutes les vidéos disposent d'une balise pour les identifier pour l'événement, ainsi que d'autres balises pour tout filtrage basé sur les rôles qui doit se produire.</p>
    <p>Pour configurer le contrôle d'accès basé sur les rôles, commencez par déterminer comment le contenu sera restreint et créez un fichier de configuration d'accès basé sur les rôles approprié. Quelques exemples de configurations sont fournis dans les sections suivantes. Associez ensuite le fichier de configuration basé sur les rôles à l'expérience. Enfin, balisez les vidéos de manière appropriée.</p>
    <aside class="bcls-aside bcls-aside--information">Note : Lors de la création de collections de vidéos, <strong>les listes de lecture</strong> ne doivent pas être utilisées pour les critères de collecte, car les playlists ne prennent pas en charge le filtrage du contrôle d'accès basé sur les rôles. Utilisez plutôt des critères <strong>personnalisés</strong>.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="creating">Création d'un fichier de configuration d'accès basé sur les rôles</h2>
    <p>Le contrôle d'accès basé sur les rôles est configuré à l'aide d'un fichier de configuration d'accès basé sur les rôles distinct. Le format du fichier est le suivant :</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["premium"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {},
     "allowByRole": {}
}   
   </code></pre>
    <p>Les valeurs de propriété dans le fichier contrôlent la façon dont l'accès est appliqué à l'expérience.</p>
    <ul>
      <li><strong>AdvanceDroleFilter</strong> - Lorsque la valeur est définie sur <strong>true</strong>, active le contrôle d'accès basé sur les rôles</li>
      <li><strong>DefaultIncludeTgs</strong> - Les balises qui doivent figurer sur toutes les vidéos pour qu'elles soient affichées dans l'expérience d'événement virtuel. Cela vous permet d'afficher uniquement un sous-ensemble de vidéos dans le compte dans l'Expérience d'événement virtuel.</li>
      <li><strong>DefaultIgnoreTags</strong> - Les vidéos comportant ces balises ne seront pas affichées aux utilisateurs qui ne font pas partie d'un rôle</li>
      <li><strong>RoleAttribute</strong> - attribut SAML de l'enregistrement utilisateur qui revient du système de gestion des utilisateurs. N'importe quel attribut SAML peut être utilisé.</li>
      <li><strong>ValueDelimiter</strong> - Délimiteur utilisé pour séparer plusieurs rôles (si plusieurs rôles peuvent être renvoyés)</li>
      <li><strong>IgnoreByRole</strong> - Augmente la fonction <code translate="No">defaultIgnoreTags</code> en ignorant davantage de balises en fonction du rôle de l'utilisateur. Ceci est utilisé pour supprimer encore plus de vidéos que l'utilisateur peut voir en fonction de son rôle.</li>
      <li><strong>IncludeByRole</strong> - Les utilisateurs ayant un rôle assigné ne verront que les vidéos avec une balise spécifiée.</li>
      <li><strong>AllowByRole</strong> - Augmente la fonction <code translate="No">defaultIncludeTags</code> en ajoutant des balises supplémentaires en fonction du rôle de l'utilisateur. Ceci est utilisé pour afficher plus de vidéos à un utilisateur en fonction de son rôle. Les utilisateurs ayant le rôle spécifié verront les vidéos étiquetées avec <code translate="No">defaultIncludeTags</code> ainsi que les balises listées ici.</li>
    </ul>
    Certains exemples de fichiers de configuration sont fournis dans les sections suivantes.</section>
  <section class="bcls-section">
    <h2 id="single-premium">Rôle premium unique</h2>
    <p>Dans ce scénario, les utilisateurs généraux peuvent afficher la plupart du contenu, mais un sous-ensemble de contenu marqué avec la balise « premium » est disponible uniquement pour les utilisateurs ayant le rôle de « premium_user ». Les utilisateurs Premium peuvent toujours voir tout le contenu que les utilisateurs généraux peuvent voir. L'utilisation d'une balise « virtual_event » limite le site à afficher uniquement le contenu du compte spécifiquement marqué pour l'événement :</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["premium"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {},
     "allowByRole": {
          "premium_user": ["premium"]
     }
}   
   </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="tiered-content">Accès au contenu hiérarchisé</h2>
    <p>Similaire au premier scénario, mais avec plusieurs niveaux où chaque niveau a accès à plus de contenu et peut toujours voir tout le contenu des niveaux inférieurs. Les rôles utilisateur sont « tier_1 », « tier_2 » et « tier_3 » tandis que les utilisateurs sans l'un de ces rôles ne verront aucun contenu hiérarchisé. Les balises sont respectivement « tier1 », « tier2 » et « tier3 » :</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["tier1", "tier2", "tier3"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {},
     "allowByRole": {
          "tier_1": ["tier1"],
          "tier_2": ["tier1", "tier2"],
          "tier_3": ["tier1", "tier2", "tier3"]
     } 
} 
      </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="split-content">Diviser l'accès au contenu</h2>
    <p>Dans cet exemple, les deux rôles utilisateur ne voient que les vidéos étiquetées spécifiquement pour leur rôle. Un utilisateur sans rôle ne verra aucun contenu pour l'une ou l'autre des balises :</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["tag1", "tag2"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {
          "role1": ["tag1"],
          "role2": ["tag2"]
     },
     "allowByRole": {}
}    
    </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="language">Segmentation par langue</h2>
    <p>En utilisant l'approche basée sur le partage, le contenu peut être servi en fonction d'un attribut SAML contenant la langue de l'utilisateur :</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": [],
     "roleAttribute": "language",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {
          "en": ["english"],
          "es": ["spanish"],
          "jp": ["japanese"]
     },
     "allowByRole": {}
}     
      </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="merged-rules">Exemple de règles fusionnées</h2>
    <p>Cet exemple artificié illustre comment les différentes options peuvent être combinées. Un utilisateur général verra tout le contenu marqué « virtual_event » qui n'est pas marqué « premium ». Un utilisateur avec le rôle « premium_user » verra tout le contenu général ainsi que le contenu premium, mais ne verra pas le contenu étiqueté avec « promotionnel ». Un utilisateur ayant un rôle « trial_user » verra du contenu général et du contenu premium, mais aussi du contenu étiqueté avec « promotionnel ». Un utilisateur avec le rôle « expired_user » ne verra que les vidéos marquées comme promotionnelles :</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["premium"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {
          "premium_user": ["promotional"]
     },
     "includeByRole": { "expired_user": ["promotional"]
     },
     "allowByRole": {
          "trial_user": ["promotional"],
          "premium_user": ["premium"]
     }
}
      </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="assign">Affectation d'un profil d'accès basé sur les rôles</h2>
    <p>Une fois que vous avez créé un profil d'accès basé sur les rôles pour contrôler l'accès au contenu, associez-le à l'expérience.</p>
    <ol class="bcls-tasklist">
      <li>Copiez le profil de contrôle d'accès dans le Presse-papiers.</li>
      <li>Ouvrez le module Gallery.</li>
      <li>Modifiez l'expérience.</li>
      <li>Cliquez sur <strong>APPARENCE ET COMPORTEMENT &gt; Personnalisé</strong> dans la navigation de gauche.</li>
      <li>Collez la configuration du profil d'accès dans le <strong>Modèle personnalisé JSON</strong> champ.
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="" src="/assets/images/experiences/virtual-event/rbac-json.png" /></figure>
        <aside class="bcls-aside bcls-aside--information">Note : Si ce champ n'est pas affiché, le compte n'a pas été activé pour le contrôle d'accès basé sur les rôles.</aside>
      </li>
      <li>Cliquez sur<strong> Enregistrer</strong>.</li>
    </ol>
    <p>Assurez-vous de <a href="/portal/previewing-and-publishing-portal-experience.html">republier l'expérience</a> pour que les modifications apparaissent.</p>
  </section>
  <section class="bcls-section">
    <h2 id="attributes">Exposition des attributs SAML</h2>
    <p>Pour que l'expérience puisse accéder à l'attribut de rôle à partir de votre fournisseur de système SSO ou d'enregistrement, vérifiez que les paramètres SSO sont configurés correctement.</p>
    <ol class="bcls-tasklist">
      <li>Ouvrez le module Galerie.</li>
      <li>Clique le <strong>Paramètres</strong> lien sur la page d'accueil de la Galerie.</li>
      <li>Dans la navigation de gauche, cliquez sur <strong>Profils de contrôle d'accès</strong>. Une liste des profils de contrôle d'accès créés s'affiche.</li>
      <li>Cliquez sur l'icône de modification du profil utilisé par Virtual Event Experience.</li>
      <li>Vérifiez que l'option <strong>Exposer tous les attributs</strong> au bas de la page est cochée.
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="" src="/assets/images/experiences/virtual-event/rbac-expose-attributes.png" /></figure>
      </li>
      <li>Cliquez sur<strong> Enregistrer</strong>.</li>
    </ol>
  </section>
</article>